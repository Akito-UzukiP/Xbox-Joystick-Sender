# 交互式世界地图标点系统

一个基于 Streamlit 和 Folium 的交互式地图标点应用，支持在世界地图上标记点位，调整顺序，并导出为 YAML 格式。

## 功能特性

- 🗺️ **交互式世界地图**：基于 OpenStreetMap 的高质量地图
- 📍 **点击添加标点**：直接在地图上点击即可添加标点
- 🔢 **有序标点管理**：标点按添加顺序自动编号，支持顺序调整
- 📤 **YAML导出**：导出包含经纬度坐标数组的 YAML 文件
- 📊 **CSV导出**：额外提供 CSV 格式导出
- 🎛️ **实时操作**：上移、下移、删除标点等实时操作
- 🔗 **路径连线**：多个标点之间自动绘制连线显示路径

## 安装依赖

```bash
pip install -r requirements_map.txt
```

## 运行应用

```bash
streamlit run interactive_map_points.py
```

应用将在浏览器中自动打开，默认地址：`http://localhost:8501`

## 使用说明

### 1. 添加标点
- 在地图上任意位置点击即可添加标点
- 标点会按添加顺序自动编号（1, 2, 3...）
- 每个标点显示完整的经纬度坐标

### 2. 管理标点
- **⬆️ 向上移动**：调整标点在序列中的位置
- **⬇️ 向下移动**：调整标点在序列中的位置  
- **🗑️ 删除**：移除单个标点
- **🗑️ 清除所有标点**：一键清空所有标点（侧边栏）

### 3. 导出数据

#### YAML 格式
导出的 YAML 文件包含：
```yaml
waypoints:
  - [39.904200, 116.407400]
  - [40.757680, -73.985840]
  - [51.507351, -0.127758]
metadata:
  total_points: 3
  created_at: "2024-01-15 14:30:25"
  description: "交互式地图标点导出"
```

#### CSV 格式
表格形式的数据，包含序号、纬度、经度和添加时间。

### 4. 地图设置
在侧边栏可以调整：
- **初始纬度/经度**：设置地图初始中心点
- **缩放级别**：调整地图显示比例（1-18）

## 应用截图功能

- 📍 **标点统计**：实时显示当前标点总数
- 🔗 **路径可视化**：多个标点间自动连线
- 🕐 **时间记录**：记录每个标点的添加时间
- 📱 **响应式设计**：支持不同屏幕尺寸

## 技术栈

- **Streamlit**：Web 应用框架
- **Folium**：地图可视化库（基于 Leaflet.js）
- **streamlit-folium**：Streamlit 和 Folium 的集成
- **PyYAML**：YAML 文件处理
- **Pandas**：数据处理和 CSV 导出

## 注意事项

1. 标点数据仅在当前会话中保存，刷新页面会丢失数据
2. 建议及时导出重要的标点数据
3. 地图需要网络连接来加载地图瓦片
4. YAML 文件使用 UTF-8 编码，支持中文注释

## 扩展功能建议

- 🗃️ 数据持久化存储（数据库）
- 📁 导入已有的标点数据
- 🏷️ 标点标签和描述功能
- 🎨 自定义标点图标和颜色
- 📏 距离和面积计算
- 🌐 多种地图底图选择

## 故障排除

### 常见问题

1. **地图不显示**：检查网络连接，确保能访问 OpenStreetMap
2. **标点点击无响应**：刷新页面重试
3. **导出文件打不开**：确保使用支持 YAML/CSV 的编辑器

### 依赖冲突

如果遇到包冲突，建议使用虚拟环境：
```bash
python -m venv venv
source venv/bin/activate  # Windows: venv\Scripts\activate
pip install -r requirements_map.txt
``` 